<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Creating Reports</TITLE>
</HEAD>
<BODY>
	<H1>Создание отчетов</H1>

	Вы можете легко создавать свои собственные отчеты.
	<p>
		Дополнение использует <a href="https://www.thymeleaf.org/">Thymeleaf</a>
		движок шаблонов, поэтому смотрите их документацию для получения
		подробной информации о синтаксис шаблонов.
	</p>
	<p>
		Встроенные отчеты копируются в каталог «отчеты». под ZAP <a
			href="https://www.zaproxy.org/faq/what-is-the-default-directory-that-zap-uses/">по
			умолчанию каталог</a>. Каждый отчет находится в своем собственном
		подкаталоге. Самый простой способ создать новый отчет — скопировать
		существующий в новый каталог на том же уровне.
	</p>
	<p>Каждый подкаталог отчета должен содержать:</p>
	<H3>template.yaml</H3>
	Файл, содержащий:
	<pre>
name:        # Отображаемое имя для отчета 
format:      # Формат, например один из HTML, XML, MD, JSON, PDF — используется внутри, но в настоящее время не отображается в ZAP. 
mode:        # Режим шаблона Thymeleaf, один из HTML, RAW, TEXT, HTML
extension: # Расширение для использования при создании отчета
разделы: # Необязательный список разделов - частей отчета, которые могут быть включены или исключены
themes: # Необязательный список тем — разные цвета и стили, применимые к одному и тому же содержимому. 

</pre>

	<H3>
		report.<i>ext</i>
	</H3>
	Шаблон отчета Thymeleaf.
	<br> Это должно иметь то же расширение, которое указано в файл
	template.yaml (например, 'report.md'), за исключением случаев, когда
	это отчет в формате PDF, в в каком случае следует использовать "html"
	(см. ниже).

	<H3>Messages.properties</H3>
	Подкаталог отчета может также включать в себя «Messages.properties».
	языковой файл для специфичных для шаблона строк, локализованных на
	английский язык, как а также "Сообщение_
	<i>locale</i>.property" для локализации строк в другие языки.
	<br> Строки, специфичные для шаблона, должны начинаться с '
	<code>шаблон отчета.</code>
	'
	<br> Если в отчет включены разделы, то они должны быть определены
	в этот файл - ключи будут автоматически иметь префикс
	<code>отчет.template.section.</code>
	. Имена разделов в файле template.yaml должны быть только
	буквенно-цифровыми. строки и не начинаться с целого числа.
	<br>Если отчет содержит темы, они должны быть определены в этом
	файл - ключи будут автоматически иметь префикс
	<code>report.template.theme.</code>
	. Имена тем в файле template.yaml должны быть только
	буквенно-цифровыми. строки и не начинаться с целого числа. .
	<br> Языковые файлы также могут переопределять переводы по
	умолчанию. встроенный в надстройку отчетов. .

	<H3>Ресурсы</H3>
	Подкаталог отчета может также включать каталог «ресурсы». . Если это
	присутствует, тогда при создании отчета подкаталог будет создан на
	основе имени отчета и всех файлов в ресурсах каталог будет скопирован в
	него. . .
	<br> Вы должны ссылаться на файлы в "ресурсах" подкаталог
	следующим образом, чтобы к ним можно было получить доступ как через по
	шаблону и по отчету при создании подкаталога: . .
	<pre>
   &lt;script th:src="${resources + '/script.js'}" src="resources/script.js"&gt;&lt;/script&gt;
   &lt;link rel="stylesheet" th:href="${resources + '/style.css'}" href="resources/style.css"&gt;
   &lt;img th:src="${resources + '/image.png'}" src="resources/image.png"&gt;
</pre>
	Шаблон «традиционный-html-плюс» включает примеры JavaScript, CSS и
	графические ресурсы.

	<H2>Доступные данные</H2>
	Следующие элементы данных доступны для всех отчетов. Это может быть
	доступ через стандартный диалект Thymeleaf, например.
	<code>${reportTitle}</code>

	<H3>alertTree</H3>
	Дерево, содержащее все оповещения, которые должны быть включены в
	отчет. Это копия стандартного дерева предупреждений ZAP, показанного на
	Вкладка «Предупреждения» на рабочем столе, но обрезана, чтобы удалить
	все предупреждения, которые не соответствуют выбранные критерии.
	<p>
		Каждый узел в дереве является <a
			href="https://javadoc.io/static/org.zaproxy/zap/2.10.0/org/zaproxy/zap/extension/alert/AlertNode.html">AlertNode</a>.
	</p>
	<p>Узел верхнего уровня не содержит никаких полезных данных.</p>
	<p>
		Для каждого найденного типа предупреждений существует один узел
		второго уровня. Эти узлы имеют 'userObject' типа <a
			href="https://javadoc.io/static/org.zaproxy/zap/2.10.0/org/parosproxy/paros/core/scanner/Alert.html">Alert</a>
		который дает вам доступ ко всем данным предупреждений и связанным с
		ними запрос и ответ.
	</p>
	<p>Третий и последний уровень содержит экземпляры предупреждений —
		это все того же типа, что и их родительский узел, и дают доступ к
		предупреждению детали таким же образом.</p>
	<H3>reportTitle</H3>
	Заголовок отчета, заданный пользователем.

	<H3>описание</H3>
	Описание отчета, заданное пользователем.

	<H3>помощник</H3>
	Экземпляр
	<a
		href="https://github.com/zaproxy/zap-extensions/tree/main/addOns/reports/src/main/java/org/zaproxy/addon/reports/ReportHelper.java">Помощник
		по отчетам</a> класс, который предоставляет полезные методы, в том числе:
	<ul>
		<li><code>getConfidenceString(int trust)</code> Возвращает
			интернационализированная строка для связанного кода доверия</li>
		<li><code>getRiskString(int Risk)</code> Возвращает
			интернационализированная строка для соответствующего кода риска</li>
		<li><code>getHttpStatusCode(int code)</code> Возвращает значение
			указанного кода состояния HTTP</li>
		<li><code>getHostForSite(String site)</code> Возвращает имя хоста
			для данного URL-адреса сайта</li>
		<li><code>getPortForSite(String site)</code> Возвращает порт для
			заданный URL-адрес сайта</li>
		<li><code>isSslSite(String site)</code> Возвращает true, если
			указанный URL-адрес сайта использует SSL</li>
		<li><code>getStatisticsString(String stat)</code> Возвращает
			значение конкретного ключа статистики - в настоящее время
			поддерживается только для статистики аутентификации</li>
		<li><code>getSiteStats(строковый сайт, строковый префикс)</code>
			возвращает Карта статистики для данного сайта, начиная с
			(необязательно) префикс</li>
		<li><code>hasSiteStats(строковый сайт, строковый префикс)</code>
			возвращает true, если на данном сайте есть статистика, начинающаяся с
			(необязательно) префикс</li>
	</ul>

	<H3>alertCounts</H3>

	Карта уровней риска по количеству уникальных предупреждений. Это можно
	использовать по отчетам, например, для формирования сводной таблицы.

	<H3>alertCountsByRule</H3>

	Сопоставление идентификаторов правил сканирования с количеством
	экземпляров.

	<H3>reportData</H3>
	Экземпляр
	<a
		href="https://github.com/zaproxy/zap-extensions/tree/main/addOns/reports/src/main/java/org/zaproxy/addon/reports/ReportData.java">Данные
		отчета</a> класс, который определяет данные, которые будут включены в
	отчет. Это может быть используется, например, чтобы узнать, не было ли
	предупреждений об уровне определенного уровне или если они были
	намеренно исключены.
	<p>Задания автоматизации могут сделать дополнительные данные
		доступными для отчеты, во многих случаях, даже если среда
		автоматизации не использовалась. См. справочные страницы для
		соответствующих вакансий для получения более подробной информации.</p>

	<H3>reportData : paramsData</H3>
	Экземпляр
	<a
		href="https://github.com/zaproxy/zap-extensions/tree/main/addOns/automation/src/main/java/org/zaproxy/addon/automation/jobs/ParamsJobResultData.java">ParamsJobResultData</a>
	класс, предоставляющий методы для запроса параметров, используемых
	сайтами. Это включено в надстройку автоматизации как «задание данных»,
	которое не предоставить любую дополнительную функциональность.

	<H3>Статистика</H3>
	Карта мировой статистики. Доступна статистика на сайте через помощника.

	<H2>Отчеты о тестировании</H2>
	ZAP не кэширует шаблоны отчетов, поэтому каждый раз перечитывает их вы
	формируете отчет. Это значительно упрощает их тестирование. Просто
	убедитесь, что параметр «Каталог шаблонов» установлен наверху уровень,
	который вы используете для своих отчетов, то при создании новый отчет,
	он будет использовать последнюю версию шаблона, который у вас есть
	сохранен. Вам не нужно будет перезапускать ZAP, чтобы применить
	какие-либо изменения. к существующим отчетам, которые вы сделали.

	<H2>PDF-отчеты</H2>
	Отчеты в формате PDF создаются с помощью
	<a href="https://github.com/flyingsaucerproject/flyingsaucer">Полет
		Библиотека Saucer</a>, которая конвертирует HTML-документы в формат PDF.
	Чтобы для создания отчета в формате PDF необходимо оформить его в HTML,
	вызвать шаблон "report.html", но укажите формат "PDF".
	<p>Обратите внимание, что Flying Saucer требует, чтобы HTML был
		правильно сформирован. XML/XHTML. Это завершится ошибкой, если шаблон
		не правильно сформирован, поэтому проверьте подробности в файле
		журнала ZAP.</p>
</BODY>
</HTML>
