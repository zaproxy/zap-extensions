<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>
Automation Framework
</TITLE>
</HEAD>
<BODY>
<H1>Automation Framework</H1>
This add-on provides a framework that allows ZAP to be automated in an easy and flexible way.

<H3><a name="command-line-options">Command Line Options</a></H3>

It provides the following command line options:
<ul>
<li>-autorun &lt;source&gt;		Run the automation jobs specified in the file or from the URL.
<li>-autogenmin &lt;filename&gt;	Generate template automation file with the key parameters.
<li>-autogenmax &lt;filename&gt;	Generate template automation file with all parameters.
<li>-autogenconf &lt;filename&gt;	Generate template automation file using the current configuration.
<li>-autocheck &lt;source&gt;	Check the specified automation plan in the file or from the URL.
</ul>

<H3><a name="exit-codes">Exit Codes</a></H3>
If the <code>-autorun</code> option is used with the ZAP <code>-cmd</code> option then the ZAP exit value will be set by default as follows: 
<ul>
<li>0 - The plan completed successfully with no errors or warnings
<li>1 - The plan reported one or more errors
<li>2 - The plan reported no errors but one or more warnings
</ul>
These values can be overridden by the <a href="job-exitstatus.html">exitStatus</a> job.<br>
Whether the plan completed after encountering errors or warnings will depend on the settings used in the <a href="environment.html">environment</a>.

<H3><a name="usage">Usage</a></H3>
To use the automation framework:
<ol>
<li>Generate a template automation file using one of the <code>-autogen*</code> command line options
<li>Edit the file to match your requirements
<li>Run the file using the <code>-autorun</code> commandline option e.g. <code>./zap.sh -cmd -autorun config.yaml</code>
</ol>

<strong>Note:</strong> The Jobs are executed in the order in which they appear (top to bottom) within the Plan.
<p>
In most cases it is recommended to also use the <code>-cmd</code> command line option so that the ZAP desktop is not displayed 
and ZAP exits as soon as it has finished generating or running the jobs defined in the file.
However you can choose to run Automation Framework jobs using the ZAP desktop to help you debug issues.

<H2><a name="authentication">Authentication</a></H2>
The Automation Framework supports all of the <a href="authentication.html">authentication</a> mechanisms supported by ZAP.

<H2><a name="gui">GUI</a></H2>
A <a href="gui.html">GUI</a> is under development and provides an ever increasing set of features.

<H2><a name="options">Options</a></H2>
The <a href="options.html">Automation Options</a> screen allows you to configure specific options.

<H2><a name="api">API</a></H2>
The following API endpoints are provided by this add-on:
<ul>
<li>Action: endDelayJob() - ends the currently running delay job, if any</li>
<li>Action: runPlan(filePath) - loads and asynchronously runs the plan in the specified file, returning a planId</li>
<li>Action: stopPlan(planId) - stops the running plan identified by the planId</li>
<li>View: planProgress(planId) - returns the progress details for the specified planId</li>
</ul>
If the ZAP desktop is being used then the plan will also be shown in the GUI to make it easier to diagnose any problems.
<p>
Note that some jobs may not stop immediately, for example if authentication is being handled.

<H2><a name="environment">Environment</a></H2>
The <a href="environment.html">environment</a> section of the file defines the applications which the rest of the jobs can act on.

<H2><a name="file-paths">File Paths</a></H2>
All file and directory paths can either be absolute or relative to the directory containing the plan. 
Relative paths are recommended for portability.

<H2><a name="jobs">Jobs</a></H2>
<p>
The following automation jobs are supported by this add-on:
<ul>
<li><a href="job-ascanconfig.html">activeScan-config</a> - configures the active scanner</li>
<li><a href="job-ascanpolicy.html">activeScan-policy</a> - creates an active policy</li>
<li><a href="job-addons.html">addOns</a> - add-on management, now deprecated</li>
<li><a href="job-delay.html">delay</a> - pauses the plan for a specified period of time or a specific condition is met</li>
<li><a href="job-requestor.html">requestor</a> - crafts specific requests to send to the corresponding targets</li>
<li><a href="job-ascan.html">activeScan</a> - runs the active scanner</li>
<li><a href="job-exitstatus.html">exitStatus</a> - sets ZAP's exit code based on scan results</li>
</ul>

<H3><a name="gen-options">General Job Options</a></H3>

The following options can be applied to all jobs, via the automation plan or the <a href="gui.html">GUI</a>:

<ul>
<li><code>enabled</code> - only jobs that are enabled will run.
<li><code>alwaysRun</code> - enabled jobs with this option will run even if the plan exits early.
</ul>

<H3>Importance of Job Order</H3>
The order of jobs is relevant and important. For example: 
<ul>
  <li>there is no point putting a passiveScan-wait job before any sort of spidering or importing</li>
  <li>configuring an alertFilter job after alerts have been generated by passive or active scanning will have no effect on the Alerts that were raised by those components in earlier jobs</li>
</ul>

<p>
<a href="tests.html">Job tests</a> can be added to jobs to check that the jobs have performed as expected.
<p>

This framework is plugable and so other add-ons may add support for other jobs, see the 
<a href="https://www.zaproxy.org/docs/automate/automation-framework/">Automation Framework</a> website pages for a more complete list.
<p>
The 'min' and 'max' templates include comments giving more information about the fields.
</BODY>
</HTML>

