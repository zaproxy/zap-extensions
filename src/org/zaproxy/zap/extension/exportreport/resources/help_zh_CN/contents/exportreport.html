<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>
            导出报告
        </title>
    </head>

    <body bgcolor="#ffffff">

        <h1><u>导出报告</u></h1>
        导出报告模版允许用户自定义内容并且以所需格式导出。
        <ul>
            <li>由<a href="https://github.com/JordanGS">JordanGS</a>创建。</li>
            <li>支持的最低版本: 每周发布ZAP_D-2016-09-05</li>
            <li>Project on  <a href="https://github.com/JordanGS/workspace">GitHub</a>. You can also find a .zip of the minimum supported release in the zap-download folder.</li>
            <li>Supported and incorporated in the <a href="https://wiki.jenkins-ci.org/display/JENKINS/zap+plugin">Official OWASP Zed Attack Proxy Jenkins Plugin</a>.</li>
        </ul>

        <h2><u>目录</u></h2>
        <ul>
            <li>ZAP UI</li>
            <li>命令行</li>
            <li>API调用</li>
        </ul>

        <hr>

        <a name="zap-ui"></a> 
        <h2><u>ZAP UI</u></h2>

        <h4>源信息</h4>
        用户输入并自动检索与报表相关的数据。将鼠标悬停在工具提示的扩展中的每个字段上。
        <ul>
            <li>标题-默认为会话名称</li>
            <li>由</li>
            <li>为</li>
            <li>扫描日期-用户输入AScan的日期，默认为当前日期-时间</li>
            <li>报告日期-默认为当前日期-时间</li>
            <li>扫描版本-未来的占位符</li>
            <li>报告版本-默认为ZAP工具的当前版本</li>
        </ul>
        <h4>UI</h4>
        <ul style="list-style-type:none">
            <li>
                <img src="images/SourceInfo.png" alt="源信息">
            </li>
        </ul>
        <br>

        <h4>警报严重性</h4>
        按严重性包括/排除警报。
        <h4>默认情况下包含</h4>
        <ul>
            <li>高</li>
            <li>中等</li>
            <li>低</li>
            <li>信息化</li>
        </ul>
        <h4>UI</h4>
        <ul style="list-style-type:none">
            <li>
                <img src="images/AlertSeverity.png" alt="源信息">
            </li>
        </ul>
        <br>

        <h4>警报详情</h4>
        包括/排除每个警报的详细信息。
        <h4>默认情况下包含</h4>
        <ul>
            <li>CWE ID</li>
            <li>WASC ID</li>
            <li>说明</li>
            <li>其他信息</li>
            <li>解决方案</li>
            <li>参考</li>
        </ul>

        <h4>默认情况下排除</h4>
        <ul>
            <li>请求报头</li>
            <li>响应头</li>
            <li>请求主体</li>
            <li>响应正文</li>
        </ul>

        <h4>UI</h4>

        <ul style="list-style-type:none">
            <li>
                <img src="images/Alert Details.png" alt="源信息">
            </li>
        </ul>

        <hr>

        <h4>文件选择器对话框</h4>
        该对话框只显示文件夹和接受的文件类型。"文件类型"下拉列表将筛选只显示指定扩展名的文件夹和文件。

        <h4>当前可用</h4>
        <ul>
            <li>ASCll1.0严格兼容的XHTML文件（.xhtml<img src="../../images/html.png" alt="XHTML Icon">）</li>
            <li>XML文件（.xml<img src="../../images/xml.png" alt="XML Icon">）</li>
            <li>JSON文件（.json<img src="../../images/json.png" alt="JSON Icon">）</li>
        </ul>

        <h4>Future Milestone</h4>
        <ul>
            <li>Bootstrap HTML Files(.bootstrap.html <img src="../../images/bootstrap.png" alt="BOOTSTRAP Icon">)</li>
            <li>PDF文档（.pdf<img src="../../images/pdf.png" alt="PDF Icon">）</li>
            <li>谷歌文档（.doc<img src="../../images/doc.png" alt="DOC Icon">）</li>
        </ul>            

        <h4>UI</h4>
        <ul style="list-style-type:none">
            <li>
                显示所有接受的文件
            </li>
            <li>
                <img src="images/FileChooser.png" alt="源信息">
            </li>
            <li><br></li>
            <li>
                接受的文件格式列表
            </li>
            <li>
                <img src="images/FileChooserChoices.png" alt="源信息">
            </li>
            <li><br></li>
            <li>
                按特定文件格式筛选
            </li>
            <li>
                <img src="images/FileChooserFilter.png" alt="源信息">
            </li>
        </ul>

        <hr>

        <a name="command-line"></a> 
        <h2><u>命令行</u></h2>
        可以从命令行运行扩展，并要求传递以下参数以生成报告。

        <h4>OWASP ZAP命令行选项</h4>
        <ul style="list-style: none;">
            <li><b>-会话</b>：启动ZAP后打开指定的会话</li>
            <li><b>-cmd</b>：运行ZAP"内联"，即不启动UI或守护进程</li>
        </ul>
        参阅 <a href="https://github.com/zaproxy/zap-core-help/wiki/HelpCmdline">Wiki</a> for more details on the natively supported command line options.

        <h4>导出报告扩展命令行选项</h4>
        <ul style="list-style: none;">
            <li><hr></li>
            <li><b>-export_report</b>: 
                <ul style="list-style: none;">
                    <li>
                        <h4>说明：</h4>
                        <ul>
                            <li>加载指定会话后保存到指定文件。</li>
                        </ul>
                    </li>
                    <li>
                        <h4>当前可用</h4>
                        <ul>
                            <li>ASCll1.0严格兼容的XHTML文件（.xhtml<img src="../../images/html.png" alt="XHTML Icon">）</li>
                            <li>XML文件（.xml<img src="../../images/xml.png" alt="XML Icon">）</li>
                            <li>JSON文件（.json<img src="../../images/json.png" alt="JSON Icon">）</li>
                        </ul>
                    </li>
                    <li>
                        <h4>Future Milestone</h4>
                        <ul>
                            <li>Bootstrap HTML Files(.bootstrap.html <img src="../../images/bootstrap.png" alt="BOOTSTRAP Icon">)</li>
                            <li>PDF文档（.pdf<img src="../../images/pdf.png" alt="PDF Icon">）</li>
                            <li>谷歌文档（.doc<img src="../../images/doc.png" alt="DOC Icon">）</li>
                        </ul>            
                    </li>
                    <li><br></li>
                </ul>
            </li>
            <li><hr></li>

            <li><b>-source_info</b>:
                <ul style="list-style: none;">
                    <li>
                        <h4>说明：</h4>
                        <ul>
                            <li>指定报告的以下详细信息：</li>
                            <li style="list-style: none;">
                                <ol>
                                    <li>标题</li>
                                    <li>由</li>
                                    <li>为</li>
                                    <li>扫描日期</li>
                                    <li>报告日期</li>
                                    <li>扫描版本</li>
                                    <li>Report Ver</li>
                                    <li>说明</li>
                                </ol>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h4>示例：</h4>
                        <ul>
                            <li>-source_info "Vulnerability Report of MyApp.com;JordanGS;Lost Souls;August 15, 2016;August 18, 2016;ZAP_D-2016-08-15;ZAP_D-2016-08-15;Lorem ipsum dolor sit amet, pri corpora ancillae adolescens in. Ea usu atomorum tincidunt, ne munere regione has. Ne sea summo tation, et sed nibh nostrum singulis. Nec causae viderer discere eu."</li>
                        </ul>
                    </li>
                    <li>
                        <h4>验证：</h4>
                        <ul>
                            <li>Content is unchecked, can enter empty fields if you wish, only condition is that all 8 items are in the list.</li>
                        </ul>
                    </li>
                    <li><br></li>
                </ul>
            </li>
            <li><hr></li>
            
            <li><b>-alert_severity</b>:
                <ul style="list-style: none;">
                    <li>
                        <h4>说明：</h4>
                        <ul>
                            <li>指定报告中将包括的警报严重性：</li>
                            <li style="list-style: none;">
                                <ol>
                                    <li>高的</li>
                                    <li>中等的</li>
                                    <li>低的</li>
                                    <li>信息化</li>
                                </ol>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h4>输入格式：</h4>
                        <ul>
                            <li>只接受带有"；"分隔符的字符串列表</li>
                        </ul>
                    </li>
                    <li>
                        <h4>输入限制：</h4>
                        <ul>
                            <li>只接受列表中每个项目的"t"和"f"</li>
                        </ul>
                    </li>
                    <li>
                        <h4>示例:</h4>
                        <ul>
                            <li>-alert_severity "t;t;f;t"</li>
                        </ul>
                    </li>
                    <li>
                        <h4>说明:</h4>
                        <ul>
                            <li>In the above example, only High, Medium and Informational Alerts will be included in the generated report.</li>
                        </ul>
                    </li>
                    <li>
                        <h4>验证:</h4>
                        <ul>
                            <li>Validation: Content is validated to be either 't' or 'f' and that all 4 items are in the list.</li>
                        </ul>
                    </li>
                    <li><br></li>
                </ul>
            </li>
            <li><hr></li>
            
            <li><b>-alert_details</b>:
                <ul style="list-style: none;">
                
                    <li>
                        <h4>说明:</h4>
                        <ul>
                            <li>指定哪些警报的详细信息将包含在报告中:</li>
                            <li style="list-style: none;">
                                <ol>
                                    <li>CWE ID</li>
                                    <li>WASC ID</li>
                                    <li>说明</li>
                                    <li>其他信息</li>
                                    <li>解决方案</li>
                                    <li>参考</li>
                                    <li>请求报头</li>
                                    <li>响应头</li>
                                    <li>请求主体</li>
                                    <li>响应正文</li>
                                </ol>
                            </li>
                        </ul>
                    <li>
                    <li>
                        <h4>输入格式:</h4>
                        <ul>
                            <li>只接受带有";"分隔符的字符串列表</li>
                        </ul>
                    </li>
                    <li>
                        <h4>输入限制:</h4>
                        <ul>
                            <li>只接受列表中每个项目的"t"和"f"</li>
                        </ul>
                    </li>
                    <li>
                        <h4>示例:</h4>
                        <ul>
                            <li>-alert_details "t;t;t;t;t;t;f;f;f;f"</li>
                        </ul>
                    </li>
                    <li>
                        <h4>说明:</h4>
                        <ul>
                            <li>在以上示例中，仅CWE ID，WASC ID，说明，其他信息，解决方案以及参考详情将包含在生成的报告中。</li>
                        </ul>
                    </li>
                    <li>
                        <h4>验证:</h4>
                        <ul>
                            <li>内容被验证为"t"或"f"，并且所有10项都在列表中。</li>
                        </ul>
                    </li>
                    <li><br></li>
                </ul>
            </li>
            <li><hr></li>
        </ul>

        <ul style="list-style: none;">
            <li>
                <h4>把这些放在一起!(窗口)</h4>
                <ol>
                    <li>打开命令提示符</li>
                    <li>导航到zap.bat文件所在的位置</li>
                    <li>执行以下操作:
                        <ul style="list-style: none;"><li>zap.bat <b>-export_report</b> "/path/to/save/report.xhtml" <b>-source_info</b> "Vulnerability Report of MyApp.com;JordanGS;Lost Souls;August 15, 2016;August 18, 2016;ZAP_D-2016-08-15;ZAP_D-2016-08-15;Lorem ipsum dolor sit amet, pri corpora ancillae adolescens in. Ea usu atomorum tincidunt, ne munere regione has. Ne sea summo tation, et sed nibh nostrum singulis. Nec causae viderer discere eu." <b>-alert_severity</b> "t;t;f;t" <b>-alert_details</b> "t;t;t;t;t;t;f;f;f;f" <b>-session</b> "/path/to/existing/session" <b>-cmd</b></li></ul>
                    </li>
                </ol>
            </li>
        </ul>

        <hr>

        <a name="api-calls"></a> 
        <h2><u>API调用</u></h2>

        可以使用API调用访问扩展，并要求传入以下参数以生成报告。

        <br><br>

        限制与命令行上的那些相同。

        <h4>用法示例:</h4>
        <blockquote><pre><code>
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
String API_KEY = "ZAPROXY-PLUGIN"
String absolutePath = "/path/to/save/report.xhtml";
String extension = "xhtml";
String sourceDetails = "Vulnerability Report of MyApp.com;JordanGS;Lost Souls;" +
    "August 15, 2016;August 18, 2016;ZAP_D-2016-08-15;ZAP_D-2016-08-15;" + 
    "Lorem ipsum dolor sit amet, pri corpora ancillae adolescens in. Ea " + 
    "usu atomorum tincidunt, ne munere regione has. Ne sea summo tation, " +
    "et sed nibh nostrum singulis. Nec causae viderer discere eu.";
String alertSeverity = "t;t;f;t";
String alertDetails = "t;t;t;t;t;t;f;f;f;f";

map.put("apikey", API_KEY);

// String representing the absolute path to save destination for the report
map.put("absolutePath", absolutePath)

// String representing the extension of the report
map.put("fileExtension", extension);

// String separated by ; for each entry
map.put("sourceDetails", sourceDetails);

// String separated by ; for each entry
map.put("alertSeverity", alertSeverity);

//String separated by ; for each entry
map.put("alertDetails", alertDetails);
</code></pre></blockquote>
<blockquote><code>ApiResponseElement val = (ApiResponseElement) clientApi.callApi("exportreport", "action", "generate", map);</code></blockquote>
    </body>
</html>